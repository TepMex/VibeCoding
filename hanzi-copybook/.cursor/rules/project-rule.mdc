---
alwaysApply: true
---
<role>
You are a seasoned Web developer with strong knowledge and skills in React and TypeScript.
</role>

<instruction>
No explanation of your action is needed if not asked explicitly.
</instruction>
<instruction>
No summary, just show me the code.
</instruction>
<instruction>
Our app should be deployable at any path on the web server, e.g foo.bar, foo.bar/app, foo.bar/folder/subfolder/app.
</instruction>

<technology-stack>
We using bun instead of nodejs, for speed.
</technology-stack>

<project-description>
We're creating React application (SPA), that should work in browser, including Chrome for Android.

Application's goal is to provide functionality to generate paper-printable PDF's of Mandarin Chinese hanzi copybooks.

<key-term>Hanzi copybook is copybook with grid markup, useful to train Chinese calligraphy, hanzi writing.</key-term>

<key-term>Example line, in hanzi writing copybooks it is the line that contains pre-filled part of hanzi (semi-transparent). Purpose of example line is to provide training to user, user can trace shady (semi-transparent) cells by pen, before start writing in empty cells.</key-term>

<feature-1>User input data. User should be able to provide input data: on our app initial screen, some controls for it should be present. <control>1. Text input for list of hanzi (text, hanzi can be separated by comma or just typed in a row).</control> <control>2. Size of cell (number), since cell has square shape, just one number needed - square side length in mm.</control> <control>3. Number of example lines (number). 4. Checkbox "Use stroke order in example lines". <sub-control>If this checkbox is checked, we should also show setting "Max number of examples" (number).</sub-control></control> <control>5. Big button "Generate copybook".</control></feature-1>
<feature-2>Generation of a printable copybook. When user press "Generate copybook", input screen should be replaced with copybook screen, where most of the screen is HTML version of copybook. HTML should be printable as one A4 paper list for each hanzi. Chinese character copybook cell markup should be used. Except printable copybook, this screen should have 2 buttons (non-printable by Ctrl-P or some standard "Print" browser functionality): "Copy link" and "Download PDF".</feature-2>
<feature-3>Permanent direct link. Each copybook generated by our app should have permanent direct link to generation. It is easy to achieve just by using base64 encoded input data as some variable in routing. Button "Copy link" should copy that permanent link. So app can be opened with or without input data. If without input data - then show input data screen, else just show generated copybook screen based on data provided in hash url.</feature-3>
<feature-4>PDF generation. When user press button "Download PDF" we should generate PDF version of the generated copybook and send it directly to user's browser. PDF file name format: "YYYYmmDDHHMMss ${up to 10 first hanzi from list} Copybook.pdf"</feature-4>
<feature-5>Example line rendering. Each Chinese character has exact stroke order. In the example lines of our generated copybooks, we should prowide this stroke order, like this. Hanzi consist of 12 lines, we should render example 1st cell - 1 line, 2st cell - 2 lines (first + second), ..., 12th cell - 12 lines (completely written hanzi). <rule>Stroke order should be used in example line only when checkbox "Use stroke order in example lines" was checked.</rule><rule>We should not generate more examples cells than limited by setting "Max number of examples", so e.g when hanzi consists of 9 strokes, but "Max number of examples" set to 5, we should start example with 5th stroke not 1st.</rule></feature-5>
<feature-6>Internationalization. UI text should be translated based on user OS / browser language. Available languages: English, Russian, Mandarin Chinese. Default language is English, fallback to English when cannot determine language.</feature-6>
</project-description>

<styling>
Use Material UI for styling.
</styling>